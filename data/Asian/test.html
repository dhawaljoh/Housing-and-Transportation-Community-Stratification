<!DOCTYPE html>
<svg width="800" height="650"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://d3js.org/topojson.v2.min.js"></script>
<link href="/bootstrap/css/bootstrap.css" rel="stylesheet">
<link href="/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

<body>
  <select style="width: 250px; height: 350px" multiple>
    <option style="font-size: 25px" value="volvo">Asian</option>
    <option style="font-size: 25px" value="saab">African-American</option>
    <option style="font-size: 25px" value="opel">Latino</option>
    <option style="font-size: 25px" value="audi">White</option>
    <option style="font-size: 25px" value="audi">Total</option>
  </select>

  <hr>
        <div class="row">
          <div class="span4">
            <h2>Files Submitted</h2>
            <p>index.html</p>
            <p>visualization.html</p>
            <p>more_info.html</p>
            <p>Phase1: Data Design PDF</p>
            <p>walkable-distance-public-transit-2008-2012.csv</p>
            <p>urban_displacement.xml</p>
          </div>
          <div class="span4">
            <h2>Data Sources</h2>
            <p><a href="https://data.chhs.ca.gov/dataset/walkable-distance-public-transit-2008-2012" target="_blank">CCHS Walkable Distance Public Transit Dataset</a></p>
            <p><a href="https://paldhous.github.io/ucb/2016/intro-data/datasets.html" target="_blank">Urban Displacement Data</a></p>
          </div>
          <div class="span4">
            <h2>Visualization Sources</h2>
            <p><a href="https://d3js.org/" target="_blank">D3</a></p>
            <p><a href="https://bl.ocks.org/mbostock/5562380" target="_blank">California Population Density</a></p>
            <p><a href="http://scottpham.com/california-counties/" target="_blank">California Counties</a></p>
          </div>
          <div class="span4">
            <h2>References</h2>
            <p><a href="../files/hcirailferrybus51narrativeandexamples11-26-13socalmtcsac.pdf" target="_blank">Maizlish, N., D. Tran, and D. M. Bustamante-Zamora. "Healthy communities data and indicators project: how-to manual and illustrative guide. Richmond and San Francisco (CA): California Department of Public Health Office of Health Equity and University of California." Institute for Health & Aging (2014).</a></p>
            <p><a href="https://www.cdph.ca.gov/Programs/OHE/Pages/Healthy-Communities-Data-and-Indicators-Project-(HCI).aspx" target="_blank">Healthy Communities Data & Indicators Project (HCI)</a></p>
            <p><a href="http://www.apta.com/resources/reportsandpublications/Documents/APTA_Health_Benefits_Litman.pdf" target="_blank">Evaluating Public Transportation Health Benefits</a></p>
            <p><a href="http://humantransit.org/2011/04/basics-walking-distance-to-transit.html" target="_blank">Walking Distance</a></p>
         </div>
        </div>

        <hr>

        <footer>
          <p>Created by <a href="https://dhawaljoh.github.io/" target="_blank">Dhawal Joharapurkar</a> (djoharap@ucsc.edu) in collaboration with <a href="https://users.soe.ucsc.edu/~lodha/" target="_blank">Prof. Suresh Lodha</a></br>
            Designed or CMPS263 Data Discovery and Visualization, Winter 2018</p>
            <b>GitHub: </b><a href="https://github.com/dhawaljoh/Housing-and-Transportation-Community-Stratification" target="_blank">https://github.com/dhawaljoh/Housing-and-Transportation-Community-Stratification</a>
        </footer>

  <script>

  var svg = d3.select("svg"),
      width = +svg.attr("width"),
      height = +svg.attr("height");

  // svg.css({top: 200, left: 200, position:'absolute'});

  var path = d3.geoPath();

  var color = d3.scaleThreshold()
      // .domain([1, 10, 50, 200, 500, 1000, 2000, 4000])
      .domain([0, 20, 40, 60, 80, 100])
      .range(d3.schemeOrRd[7]);

  var x = d3.scaleSqrt()
      .domain([0, 100])
      .rangeRound([440, 950]);

  var g = svg.append("g")
      .attr("class", "key")
      .attr("transform", "translate(110,40)");

  g.selectAll("rect")
    .data(color.range().map(function(d) {
        d = color.invertExtent(d);
        if (d[0] == null) d[0] = x.domain()[0];
        if (d[1] == null) d[1] = x.domain()[1];
        return d;
      }))
    .enter().append("rect")
      .attr("height", 8)
      .attr("x", function(d) { return x(d[0]); })
      .attr("width", function(d) { return x(d[1]) - x(d[0]); })
      .attr("fill", function(d) { return color(d[0]); });

  g.append("text")
      .attr("class", "caption")
      .attr("x", x.range()[0])
      .attr("y", -6)
      .attr("fill", "#000")
      .attr("text-anchor", "start")
      .attr("font-weight", "bold")
      .text("Percentage of Population with Access to Public Transportation");

  g.call(d3.axisBottom(x)
      .tickSize(13)
      .tickValues(color.domain()))
    .select(".domain")
      .remove();

  var ethnicity = "ca-quantized-topo.json"
  d3.json(ethnicity, function(error, topology) {
    if (error) throw error;

    svg.append("g")
      .selectAll("path")
      // .attr("transform", "translate(0,10)");
      .data(topojson.feature(topology, topology.objects.tracts).features)
      .enter().append("path")
        .attr("fill", function(d) { return color(d.properties.density); })
        .attr("d", path);

    svg.append("path")
        .datum(topojson.feature(topology, topology.objects.counties))
        .attr("fill", "none")
        .attr("stroke", "#000")
        .attr("stroke-opacity", 0.3)
        .attr("d", path);
  });

  </script>
</body>
</html>